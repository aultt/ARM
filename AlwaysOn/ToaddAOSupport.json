{
    "type": "Microsoft.Compute/virtualMachines/extensions",
    "name": "[concat(parameters('sqlNamePrefix'),'0/sqlAOPrepare')]",
    "apiVersion": "2015-06-15",
    "location": "[parameters('location')]",
    "dependsOn": [],
    "properties": {
      "publisher": "Microsoft.Powershell",
      "type": "DSC",
      "typeHandlerVersion": "2.17",
      "autoUpgradeMinorVersion": true,
      "settings": {
        "wmfVersion": "5.0",
        "modulesUrl": "[variables('sqlAOPrepareModulesURL')]",
        "configurationFunction": "[variables('sqlAOPrepareConfigurationFunction')]",
        "properties": {
          "domainName": "[parameters('domainName')]",
          "sqlAlwaysOnEndpointName": "[parameters('sqlAlwaysOnEndpointName')]",
          "adminCreds": {
            "userName": "[parameters('adminUsername')]",
            "password": "PrivateSettingsRef:adminPassword"
          },
          "sqlServiceCreds": {
            "userName": "[parameters('sqlServerServiceAccountUserName')]",
            "password": "PrivateSettingsRef:sqlServerServiceAccountPassword"
          }
        }
      },
     "protectedSettings": {
       "items": {
         "adminPassword": "[parameters('adminPassword')]",
         "sqlServerServiceAccountPassword": "[parameters('sqlServerServiceAccountPassword')]"
       }
     }
   }
 },